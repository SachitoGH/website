---
export interface Feature {
  title: string;
  description: string;
  iconPath: string; // Le contenu du path SVG
  link?: {        // Lien optionnel (comme pour Contact)
    url: string;
    text: string;
    subText?: string;
  };
}

interface Props {
  features: Feature[];
  bgColor?: string;      // Couleur de fond de la section (ex: bg-sand/30)
  iconBgColor?: string;  // Couleur de fond des ronds (ex: bg-white)
  title?: string;        // Titre optionnel de la section
  subtitle?: string;     // Sous-titre optionnel
}

const {
  features,
  bgColor = "bg-white",
  iconBgColor = "bg-sand",
  title,
  subtitle
} = Astro.props;
---

<section class={`py-20 px-4 ${bgColor} border-t border-stone-100/50`}>
  <div class="max-w-7xl mx-auto text-center">

    {title && (
      <div class="mb-12">
         <h2 class="text-3xl font-serif text-ocean mb-2">{title}</h2>
         {subtitle && <p class="text-stone-500 font-light">{subtitle}</p>}
      </div>
    )}

    <div class={`grid grid-cols-1 md:grid-cols-${features.length > 3 ? '4' : '3'} gap-8 items-start`}>
      {features.map((feature) => (
        <div class="flex flex-col items-center group h-full">

            {/* CERCLE ICONE */}
            <div class={`w-16 h-16 rounded-full ${iconBgColor} flex items-center justify-center text-ocean mb-4 shadow-sm group-hover:scale-110 transition-transform`}>
                {/* FIX ICI :
                   1. On s'assure que le SVG a stroke="currentColor"
                   2. On utilise set:html sur un <g> ou on injecte directement dans le svg
                */}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-8 h-8"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d={feature.iconPath} />
                </svg>
            </div>

            {/* ... reste du code (liens et textes) ... */}
            {feature.link ? (
                <>
                    <a href={feature.link.url} target={feature.link.url.startsWith('http') ? "_blank" : "_self"} class="text-lg font-serif text-dark hover:text-terra transition-colors font-bold">
                        {feature.link.text}
                    </a>
                    {feature.link.subText && (
                        <span class="text-xs text-stone-400 mt-1 uppercase tracking-wide">{feature.link.subText}</span>
                    )}
                </>
            ) : (
                <>
                    <h3 class="font-bold text-dark mb-2">{feature.title}</h3>
                    <p class="text-sm text-stone-600 px-4 leading-relaxed">{feature.description}</p>
                </>
            )}
        </div>
      ))}
    </div>
  </div>
</section>
