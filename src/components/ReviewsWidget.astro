---
import { reviews } from '../data/reviews';

// LOGIQUE : Mélanger et prendre 3 avis au hasard
// On crée une copie du tableau [...reviews] pour ne pas modifier l'original, puis on trie aléatoirement
const randomReviews = [...reviews]
    .sort(() => 0.5 - Math.random())
    .slice(0, 3);

// Petite fonction helper pour afficher les étoiles
const renderStars = (rating: number) => "★".repeat(rating);
---

<section class="py-12 max-w-7xl mx-auto px-4">
    <div class="text-center mb-12">
        <h2 class="text-2xl font-serif text-ocean mb-4">Le livre d'Or</h2>
        <p class="text-dark/60">Ce que nos surfeurs disent de nous</p>
    </div>

    <div class="flex flex-col items-center">

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 w-full">
            {randomReviews.map((review) => (
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-stone-100/50 flex flex-col h-full">
                    <div class="text-yellow-400 text-sm mb-3 tracking-widest">
                        {renderStars(review.rating)}
                    </div>

                    <p class="text-stone-600 italic leading-relaxed flex-grow">
                        "{review.text}"
                    </p>

                    <div class="mt-6 font-bold text-dark text-sm border-t border-stone-100 pt-3">
                        - {review.author}
                    </div>
                </div>
            ))}
        </div>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-4 w-full">

            <a href="https://fr.tripadvisor.be/Attraction_Review-g7008805-d33218271-Reviews-Global_Surf_Sidi_Kaouki-Sidi_Kaouki_Marrakech_Safi.html" target="_blank" class="inline-flex items-center justify-center gap-3 bg-ocean text-white px-8 py-3 rounded-full font-bold hover:bg-ocean/90 transition shadow-lg hover:-translate-y-1 min-w-[250px]">
                <span>Voir sur TripAdvisor</span>
            </a>

            <a href="https://www.google.com/search?client=firefox-b-d&hs=hYCp&sa=X&sca_esv=59623aa993e8ccae&biw=981&bih=918&aic=0&sxsrf=ANbL-n5OeEjJG5CCOFRUEBUn2KM10uzlhQ:1768945660181&q=GlobalSurfSidi+Kaouki+Avis&rflfq=1&num=20&stick=H4sIAAAAAAAAAONgkxI2tjAxN7cwsjS3NDUxtLQ0MzSx2MDI-IpRyj0nPykxJ7i0KC04MyVTwTsxvzQ7U8GxLLN4ESseSQDPICCHVAAAAA&rldimm=3847782979541996148&tbm=lcl&hl=fr-BE&ved=2ahUKEwi-1M6NjJuSAxXvOfsDHQfnJ00Q9fQKegQIQxAG#lkt=LocalPoiReviews" target="_blank" class="inline-flex items-center justify-center gap-3 bg-white border border-stone-200 text-dark px-8 py-3 rounded-full font-bold hover:bg-stone-50 transition shadow-sm hover:shadow-md hover:-translate-y-1 min-w-[250px]">
                <span>Voir sur Google</span>
            </a>
        </div>
    </div>
</section>
