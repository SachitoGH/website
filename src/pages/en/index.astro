---
import FeaturesGrid from '../../components/FeaturesGrid.astro';
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/Card.astro';
import ReviewsWidget from '../../components/ReviewsWidget.astro';
import { offerings } from '../../data/offerings';
import { homeFeatures } from '../../data/features';
import { useTranslations } from '../../i18n/utils';

const t = useTranslations('en');
// On récupère les 3 premiers items pour la home
const featured = offerings.slice(0, 3);
---

<Layout title="Home">

  <section class="relative h-screen flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0">
      <img
        src="https://images.unsplash.com/photo-1502680390469-be75c86b636f?q=80&w=2000&auto=format&fit=crop"
        class="w-full h-full object-cover"
        alt="Sidi Kaouki Surf"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-dark/30 via-transparent to-dark/60 mix-blend-multiply"></div>
    </div>

    <div class="relative z-10 text-center text-light px-4 mt-10">
      <p class="text-lg md:text-xl uppercase tracking-[0.2em] mb-6 font-medium text-terra drop-shadow-md">
        Morocco • Sidi Kaouki
      </p>

      <h1 class="text-5xl md:text-7xl font-serif font-bold mb-8 drop-shadow-lg">
        Global Surf
      </h1>

      <a href="#book" class="js-open-booking bg-terra hover:bg-terra/90 text-white px-8 py-4 rounded-full text-lg font-medium transition duration-300 inline-block shadow-lg hover:shadow-xl hover:-translate-y-1">
        Book your session
      </a>
    </div>
  </section>

  <section class="py-24 max-w-4xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-serif text-ocean mb-8">Welcome Home</h2>
    <p class="text-lg text-dark/80 leading-relaxed font-light">
      Located just steps from the wild waves of Sidi Kaouki, our school and surf house welcomes you in an authentic atmosphere.
      Here, time stops to make way for the sound of the waves and the warmth of Moroccan hospitality.
    </p>
  </section>

  <section class="py-10 bg-light">
    <div class="max-w-7xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-2xl font-serif text-ocean mb-2">Our most popular packages</h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {featured.map(item => (
          <Card
            title={item.titleEn || item.title}
            price={item.price}
            image={item.image}
            href={`/en/detail/${item.id}`}
          />
        ))}
        </div>
    </div>
  </section>

  <ReviewsWidget />

  <FeaturesGrid
    features={homeFeatures.map(f => ({
        ...f,
        title: f.titleEn || f.title,
        description: f.descriptionEn || f.description
    }))}
    bgColor="bg-light"
    iconBgColor="bg-sand/30"
  />

</Layout>
